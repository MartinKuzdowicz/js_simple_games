<!DOCTYPE html>
<html>
<head>

<meta charset="utf-8" \>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous" />

<title>cards game</title>

<style>
	
ul.cardsUL {
  margin: 0 auto;
  margin-top:50px;
  padding: 0;
  width: 1150px;
}

ul.cardsUL li {
  list-style: none;
  display: inline-block;
  margin-left: 5px;
  margin-bottom: 5px;
}

#dropZone{
	width: 300px;
	height: 300px;
	background-color: #ddd;
	border: 1px dotted black;
	margin: 0 auto 10% auto;
	padding-top: 5%;
}

#status {
	width: 300px;
	height: 80px;
	background-color: #ddd;
	border: 1px dotted black;
	margin: 0 auto;
	padding-top: 1%;
	padding-bottom: 1%;
}

.card {
	width: 65px;
}

</style>
	
</head>	
<body>

	<div class="container">
		
	<h1 class="text-center text-uppercase">crads game</h1>

	<div id="status" class="text-center">drop count: 0 <br /> points: 0</div>

	<div id="computerCardsDiv" class="text-center">

		<ul class="cardsUL" id="compCardsUL"></ul>

	</div>
	<br />
	<br />
	<div id="dropZone" class="text-center"></div>


	<div id="humanCardsDiv">

		<ul class="cardsUL" id="humCardsUL"></ul>

	</div>


	</div>

<!-- imoprt cards -->
<script src="cardsDB.js"></script>

<script>

// global vars ------------------------------------------



var darggedElId;

var droppedObject;

var dropCounter = 0;

var points = 0;

// main ----------------------------------------------------

window.onload = function() {


	var dropZone = document.getElementById('dropZone');

	initComputerCards();

	dropZone.addEventListener("dragover", dragover, false);

	dropZone.addEventListener("drop", drop, false);

};

// functions ---------------------------------------------------

function initComputerCards() {

	var cardsUL = document.getElementById('compCardsUL');

	for(var key in cards) {

		var li = document.createElement('LI');
		var img = document.createElement('IMG');
		var tempCard = cards[key];
		img.src = tempCard.imgSrc;
		img.id = key;
		img.className = 'card';

		img.addEventListener("dragstart", drag, false);

		li.appendChild(img);
		cardsUL.appendChild(li);

	}

}


function drag(e) {

	darggedElId = e.target.id;

}

function dragover(e) {

	e.preventDefault();

}

function drop(e){

	e.preventDefault();

	performGameLogic();

	
	}

function performGameLogic() {

	var dropZone = document.getElementById('dropZone');

	var actualCardInDropZoneObj = droppedObject;

	var newDroppedCard = cards[darggedElId];

	var gameStatus = document.getElementById('status');

	var statusMsg;


	var Strategy = {

		firstTime: function() {

							droppedObject = cards[darggedElId];
							dropZone.appendChild(document.getElementById(darggedElId));

							dropCounter++;

							statusMsg = 'drop count: ' + dropCounter + '<br />' 
									+ droppedObject.name + ' is in drop zone' 
									+ '<br /> points: ' +points;
								
							gameStatus.innerHTML = statusMsg;
								
						},

		isGreater : function() {
							// delete preview card
							dropZone.innerHTML = '';
							// move new
							dropZone.appendChild(document.getElementById(darggedElId));
							// swap global var for actual card in playground
							droppedObject = newDroppedCard;

							dropCounter++;
							points++;

							statusMsg = 'drop count: ' + dropCounter + 
								'<br />' + newDroppedCard.name + 
								' is in drop zone' + '<br /> points: ' +points;
							// update status msg	
							gameStatus.innerHTML = statusMsg;

						},
		isEqual : function() {alert(newDroppedCard.name + ' is equal to ' + actualCardInDropZoneObj.name + ', choose greater card');},
		isLess : function() { alert(newDroppedCard.name + ' is less then ' + actualCardInDropZoneObj.name + ', choose greater card');}

	}


	if(dropCounter == 0) {

		Strategy.firstTime();
		return;

	} 

	if (newDroppedCard.gameVal > actualCardInDropZoneObj.gameVal) {

		Strategy.isGreater();
		return;
	} 

	if(newDroppedCard.gameVal == actualCardInDropZoneObj.gameVal) {

		Strategy.isEqual();
		return;
	} 

	if(newDroppedCard.gameVal < actualCardInDropZoneObj.gameVal) {

		Strategy.isLess();
		return;
	} 


}



</script>

</body>
</html>